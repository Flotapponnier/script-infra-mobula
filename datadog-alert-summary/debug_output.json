{
  "total_monitors": 44,
  "preprod_count": 20,
  "prod_count": 24,
  "prod_monitors": [
    {
      "id": 93160249,
      "name": "[PROD] PostgreSQL Connections High - {{host.name}}",
      "overall_state": "OK",
      "tags": [
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:postgres",
        "severity:high"
      ],
      "query": "avg(last_5m):avg:postgresql.connections{env:prod} by {host} > 900"
    },
    {
      "id": 93160250,
      "name": "[PROD] PostgreSQL WAL Lag > 1 minute - {{host.name}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:wal-lag",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:postgres",
        "severity:critical"
      ],
      "query": "avg(last_5m):avg:postgresql.wal_receiver.last_msg_receipt_age{env:prod} by {host} > 60"
    },
    {
      "id": 93160251,
      "name": "[PROD] PostgreSQL High CPU - {{host.name}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:cpu",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:postgresql"
      ],
      "query": "avg(last_5m):(avg:system.cpu.user{env:prod,service:postgresql} by {host} + avg:system.cpu.system{env"
    },
    {
      "id": 93160252,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 Node Memory Pressure - {{host.name}} - {{value}}%{{/is_alert}}{{#is_recovery}}[PROD] \u2705 Node Memory Pressure Resolved - {{host.name}} - {{value}}%{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes",
        "severity:high"
      ],
      "query": "avg(last_10m):avg:system.mem.pct_usable{env:prod} by {host} < 0.15"
    },
    {
      "id": 93160253,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 Node Disk High - {{host.name}} - {{value}}%{{/is_alert}}{{#is_recovery}}[PROD] \u2705 Node Disk Normal - {{host.name}} - {{value}}%{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:node-disk-usage",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "avg(last_5m):avg:system.disk.in_use{env:prod,device:/} by {host} * 100 > 85"
    },
    {
      "id": 93160255,
      "name": "{{#is_alert}}[PROD] :red_circle: PostgreSQL WAL Write Lag High - {{wal_app_name}} - {{value}}s{{/is_alert}}{{#is_warning}}[PROD] :warning: PostgreSQL WAL Write Lag Warning - {{wal_app_name}} - {{value}}s{{/is_warning}}{{#is_recovery}}[PROD] :white_check_mark: PostgreSQL WAL Write Lag Normal - {{wal_app_name}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:replication-lag",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:postgresql",
        "severity:high"
      ],
      "query": "avg(last_5m):avg:postgresql.replication.wal_write_lag{wal_app_name:postgres-prod-*} by {wal_app_name"
    },
    {
      "id": 93160256,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 PostgreSQL Disk /dev/md0 High - {{host.name}} - {{value}}%{{/is_alert}}{{#is_warning}}[PROD] \u26a0\ufe0f PostgreSQL Disk /dev/md0 Warning - {{host.name}} - {{value}}%{{/is_warning}}{{#is_recovery}}[PROD] \u2705 PostgreSQL Disk /dev/md0 Normal - {{host.name}}{{/is_recovery}}",
      "overall_state": "Warn",
      "tags": [
        "alert-type:disk",
        "cluster:bare-metal-ovh",
        "critical:true",
        "env:prod",
        "managed-by:terraform",
        "service:postgresql"
      ],
      "query": "avg(last_5m):avg:system.disk.in_use{env:prod,service:postgresql,device:/dev/md0} by {host} * 100 > 8"
    },
    {
      "id": 93160257,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 Node Memory High - {{host.name}} - {{value}}%{{/is_alert}}{{#is_recovery}}[PROD] \u2705 Node Memory Normal - {{host.name}} - {{value}}%{{/is_recovery}}",
      "overall_state": "Alert",
      "tags": [
        "alert-type:node-memory",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "avg(last_5m):100 - avg:system.mem.pct_usable{env:prod} by {host} > 90"
    },
    {
      "id": 93160258,
      "name": "{{#is_no_data}}[PROD] :red_circle: PostgreSQL Database Down - {{database_hostname}} - No uptime data{{/is_no_data}}{{#is_recovery}}[PROD] :white_check_mark: PostgreSQL Database Up - {{database_hostname}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:database-down",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:postgresql",
        "severity:critical"
      ],
      "query": "avg(last_5m):avg:postgresql.uptime{database_hostname:postgres-*,env:prod} by {database_hostname} < 0"
    },
    {
      "id": 93160259,
      "name": "[PROD] Kubernetes Node Created - {{host.name}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:node-creation",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "min(last_10m):min:kubernetes_state.node.age{env:prod} by {host} / 60 < 10"
    },
    {
      "id": 93160260,
      "name": "[PROD] Kubernetes Node Deleted - Count Decreased",
      "overall_state": "OK",
      "tags": [
        "alert-type:node-deletion",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "avg(last_10m):diff(avg:kubernetes_state.node.count{env:prod}) < -0.5"
    },
    {
      "id": 93160262,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 Node CPU High - {{host.name}} - {{value}}%{{/is_alert}}{{#is_recovery}}[PROD] \u2705 Node CPU Normal - {{host.name}} - {{value}}%{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:node-cpu",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "avg(last_5m):(avg:system.cpu.user{env:prod} by {host} + avg:system.cpu.system{env:prod} by {host}) >"
    },
    {
      "id": 93160263,
      "name": "[PROD] Kubernetes Pod Restarting - {{pod_name.name}}",
      "overall_state": "OK",
      "tags": [
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes",
        "severity:medium"
      ],
      "query": "change(avg(last_15m),last_5m):avg:kubernetes.containers.restarts{env:prod} by {pod_name,kube_namespa"
    },
    {
      "id": 93160264,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 Node PID Pressure - {{host.name}}{{/is_alert}}{{#is_recovery}}[PROD] \u2705 Node PID Pressure Resolved - {{host.name}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:node-pid",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "max(last_5m):max:kubernetes_state.node.by_condition{env:prod,condition:pid_pressure} by {host} >= 1"
    },
    {
      "id": 93160265,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 Node Disk Pressure - {{host.name}}{{/is_alert}}{{#is_recovery}}[PROD] \u2705 Node Disk Pressure Resolved - {{host.name}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:node-disk",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "max(last_5m):max:kubernetes_state.node.by_condition{env:prod,condition:disk_pressure} by {host} >= 1"
    },
    {
      "id": 93160266,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 Container terminated - {{pod_name.name}}{{/is_alert}}{{#is_recovery}}[PROD] \u2705 Container running - {{pod_name.name}}{{/is_recovery}}",
      "overall_state": "Alert",
      "tags": [
        "alert-type:container-terminated",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "avg(last_5m):avg:kubernetes.containers.state.terminated{env:prod} by {pod_name,kube_namespace} > 0"
    },
    {
      "id": 93160267,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 Pod in CrashLoop - {{pod_name.name}}{{/is_alert}}{{#is_recovery}}[PROD] \u2705 Pod recovered - {{pod_name.name}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:crashloop",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "max(last_5m):max:kubernetes_state.pod.status_phase{env:prod,phase:failed} by {pod_name,kube_namespac"
    },
    {
      "id": 93160268,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 Pod restarting frequently - {{pod_name.name}} - {{value}} restarts{{/is_alert}}{{#is_warning}}[PROD] \u26a0\ufe0f Pod restarting - {{pod_name.name}} - {{value}} restart{{/is_warning}}{{#is_recovery}}[PROD] \u2705 Pod stable - {{pod_name.name}}{{/is_recovery}}",
      "overall_state": "Alert",
      "tags": [
        "alert-type:pod-restarts",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "avg(last_10m):avg:kubernetes.containers.restarts{env:prod} by {pod_name,kube_namespace} > 2"
    },
    {
      "id": 93172911,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 Postgres Disk High - {{host.name}} {{device.name}} - {{value}}%{{/is_alert}}{{#is_warning}}[PROD] \u26a0\ufe0f Postgres Disk Warning - {{host.name}} {{device.name}} - {{value}}%{{/is_warning}}{{#is_recovery}}[PROD] \u2705 Postgres Disk Normal - {{host.name}} {{device.name}}{{/is_recovery}}",
      "overall_state": "Warn",
      "tags": [
        "alert-type:disk",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:postgresql",
        "severity:high"
      ],
      "query": "avg(last_5m):avg:system.disk.in_use{host:postgres*,env:prod,device:/dev/md*} by {host,device} * 100 "
    },
    {
      "id": 93179444,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 Node Not Ready - {{host.name}}{{/is_alert}}{{#is_recovery}}[PROD] \u2705 Node Ready - {{host.name}}{{/is_recovery}}",
      "overall_state": "No Data",
      "tags": [
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes",
        "severity:critical"
      ],
      "query": "\"kubernetes_state.node.ready\".over(\"env:prod\").by(\"host\").last(2).count_by_status()"
    },
    {
      "id": 93179445,
      "name": "{{#is_alert}}[PROD] \ud83d\udd34 PVC Usage High - {{persistentvolumeclaim.name}} - {{value}}%{{/is_alert}}{{#is_recovery}}[PROD] \u2705 PVC Usage Normal - {{persistentvolumeclaim.name}} - {{value}}%{{/is_recovery}}",
      "overall_state": "No Data",
      "tags": [
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:kubernetes",
        "severity:high"
      ],
      "query": "avg(last_10m):avg:kubernetes.persistentvolumeclaim.usage{env:prod} by {persistentvolumeclaim,kube_na"
    },
    {
      "id": 93180979,
      "name": "{{#is_alert}}[PROD] :red_circle: Service CPU High - {{pod_name}} - {{value}}%{{/is_alert}}{{#is_warning}}[PROD] :warning: Service CPU Warning - {{pod_name}} - {{value}}%{{/is_warning}}{{#is_recovery}}[PROD] :white_check_mark: Service CPU Normal - {{pod_name}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:cpu",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:all",
        "severity:high"
      ],
      "query": "avg(last_5m):(avg:kubernetes.cpu.usage.total{env:prod,kube_namespace:services-prod} by {pod_name} / "
    },
    {
      "id": 93180980,
      "name": "{{#is_alert}}[PROD] :red_circle: Service Memory High - {{pod_name}} - {{value}}%{{/is_alert}}{{#is_warning}}[PROD] :warning: Service Memory Warning - {{pod_name}} - {{value}}%{{/is_warning}}{{#is_recovery}}[PROD] :white_check_mark: Service Memory Normal - {{pod_name}}{{/is_recovery}}",
      "overall_state": "Alert",
      "tags": [
        "alert-type:memory",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:all",
        "severity:high"
      ],
      "query": "avg(last_5m):avg:kubernetes.memory.usage{env:prod,kube_namespace:services-prod} by {pod_name} / avg:"
    },
    {
      "id": 93180981,
      "name": "{{#is_alert}}[PROD] :red_circle: Service Pod Down - {{pod_name}} - CPU at 0{{/is_alert}}{{#is_no_data}}[PROD] :red_circle: Service Pod Down - {{pod_name}} - No Data{{/is_no_data}}{{#is_recovery}}[PROD] :white_check_mark: Service Pod Running - {{pod_name}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:pod-down",
        "cluster:bare-metal-ovh",
        "env:prod",
        "managed-by:terraform",
        "service:all",
        "severity:critical"
      ],
      "query": "avg(last_5m):avg:kubernetes.cpu.usage.total{env:prod,kube_namespace:services-prod} by {pod_name} <= "
    }
  ],
  "preprod_monitors": [
    {
      "id": 93160070,
      "name": "{{#is_alert}}[PREPROD] \ud83d\udd34 PostgreSQL Disk /dev/md0 High - {{host.name}} - {{value}}%{{/is_alert}}{{#is_warning}}[PREPROD] \u26a0\ufe0f PostgreSQL Disk /dev/md0 Warning - {{host.name}} - {{value}}%{{/is_warning}}{{#is_recovery}}[PREPROD] \u2705 PostgreSQL Disk /dev/md0 Normal - {{host.name}}{{/is_recovery}}",
      "overall_state": "Alert",
      "tags": [
        "alert-type:disk",
        "cluster:bare-metal-ovh",
        "critical:true",
        "env:preprod",
        "managed-by:terraform",
        "service:postgresql"
      ],
      "query": "avg(last_5m):avg:system.disk.in_use{env:preprod,service:postgresql,device:/dev/md0} by {host} * 100 "
    },
    {
      "id": 93160078,
      "name": "[PREPROD] PostgreSQL High CPU - {{host.name}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:cpu",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:postgresql"
      ],
      "query": "avg(last_5m):(avg:system.cpu.user{env:preprod,service:postgresql} by {host} + avg:system.cpu.system{"
    },
    {
      "id": 93160160,
      "name": "[PREPROD] Kubernetes Pod Restarting - {{pod_name.name}}",
      "overall_state": "OK",
      "tags": [
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes",
        "severity:medium"
      ],
      "query": "change(avg(last_15m),last_5m):avg:kubernetes.containers.restarts{env:preprod} by {pod_name,kube_name"
    },
    {
      "id": 93160161,
      "name": "{{#is_alert}}[PREPROD] \ud83d\udd34 Container terminated - {{pod_name.name}}{{/is_alert}}{{#is_recovery}}[PREPROD] \u2705 Container running - {{pod_name.name}}{{/is_recovery}}",
      "overall_state": "Alert",
      "tags": [
        "alert-type:container-terminated",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "avg(last_5m):avg:kubernetes.containers.state.terminated{env:preprod} by {pod_name,kube_namespace} > "
    },
    {
      "id": 93160169,
      "name": "{{#is_alert}}[PREPROD] \ud83d\udd34 Node CPU High - {{host.name}} - {{value}}%{{/is_alert}}{{#is_recovery}}[PREPROD] \u2705 Node CPU Normal - {{host.name}} - {{value}}%{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:node-cpu",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "avg(last_5m):(avg:system.cpu.user{env:preprod} by {host} + avg:system.cpu.system{env:preprod} by {ho"
    },
    {
      "id": 93160170,
      "name": "[PREPROD] Kubernetes Node Created - {{host.name}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:node-creation",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "min(last_10m):min:kubernetes_state.node.age{env:preprod} by {host} / 60 < 10"
    },
    {
      "id": 93160171,
      "name": "{{#is_alert}}[PREPROD] \ud83d\udd34 Node Not Ready - {{host.name}}{{/is_alert}}{{#is_recovery}}[PREPROD] \u2705 Node Ready - {{host.name}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes",
        "severity:critical"
      ],
      "query": "\"kubernetes_state.node.ready\".over(\"env:preprod\").by(\"host\").last(2).count_by_status()"
    },
    {
      "id": 93160172,
      "name": "[PREPROD] Kubernetes Node Deleted - Count Decreased",
      "overall_state": "OK",
      "tags": [
        "alert-type:node-deletion",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "avg(last_10m):diff(avg:kubernetes_state.node.count{env:preprod}) < -0.5"
    },
    {
      "id": 93160176,
      "name": "{{#is_alert}}[PREPROD] \ud83d\udd34 Node Disk Pressure - {{host.name}}{{/is_alert}}{{#is_recovery}}[PREPROD] \u2705 Node Disk Pressure Resolved - {{host.name}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:node-disk",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "max(last_5m):max:kubernetes_state.node.by_condition{env:preprod,condition:disk_pressure} by {host} >"
    },
    {
      "id": 93160177,
      "name": "{{#is_alert}}[PREPROD] \ud83d\udd34 Node PID Pressure - {{host.name}}{{/is_alert}}{{#is_recovery}}[PREPROD] \u2705 Node PID Pressure Resolved - {{host.name}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:node-pid",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "max(last_5m):max:kubernetes_state.node.by_condition{env:preprod,condition:pid_pressure} by {host} >="
    },
    {
      "id": 93160181,
      "name": "{{#is_alert}}[PREPROD] \ud83d\udd34 Node Memory High - {{host.name}} - {{value}}%{{/is_alert}}{{#is_recovery}}[PREPROD] \u2705 Node Memory Normal - {{host.name}} - {{value}}%{{/is_recovery}}",
      "overall_state": "Alert",
      "tags": [
        "alert-type:node-memory",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "avg(last_5m):100 - avg:system.mem.pct_usable{env:preprod} by {host} > 90"
    },
    {
      "id": 93160182,
      "name": "{{#is_alert}}[PREPROD] \ud83d\udd34 Node Memory Pressure - {{host.name}} - {{value}}%{{/is_alert}}{{#is_recovery}}[PREPROD] \u2705 Node Memory Pressure Resolved - {{host.name}} - {{value}}%{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes",
        "severity:high"
      ],
      "query": "avg(last_10m):avg:system.mem.pct_usable{env:preprod} by {host} < 0.15"
    },
    {
      "id": 93160183,
      "name": "{{#is_alert}}[PREPROD] \ud83d\udd34 Pod restarting frequently - {{pod_name.name}} - {{value}} restarts{{/is_alert}}{{#is_warning}}[PREPROD] \u26a0\ufe0f Pod restarting - {{pod_name.name}} - {{value}} restart{{/is_warning}}{{#is_recovery}}[PREPROD] \u2705 Pod stable - {{pod_name.name}}{{/is_recovery}}",
      "overall_state": "Alert",
      "tags": [
        "alert-type:pod-restarts",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "avg(last_10m):avg:kubernetes.containers.restarts{env:preprod} by {pod_name,kube_namespace} > 2"
    },
    {
      "id": 93160184,
      "name": "{{#is_alert}}[PREPROD] \ud83d\udd34 Pod in CrashLoop - {{pod_name.name}}{{/is_alert}}{{#is_recovery}}[PREPROD] \u2705 Pod recovered - {{pod_name.name}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:crashloop",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "max(last_5m):max:kubernetes_state.pod.status_phase{env:preprod,phase:failed} by {pod_name,kube_names"
    },
    {
      "id": 93160194,
      "name": "{{#is_alert}}[PREPROD] \ud83d\udd34 Node Disk High - {{host.name}} - {{value}}%{{/is_alert}}{{#is_recovery}}[PREPROD] \u2705 Node Disk Normal - {{host.name}} - {{value}}%{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:node-disk-usage",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes"
      ],
      "query": "avg(last_5m):avg:system.disk.in_use{env:preprod,device:/} by {host} * 100 > 85"
    },
    {
      "id": 93160202,
      "name": "[PREPROD] PostgreSQL Connections High - {{host.name}}",
      "overall_state": "OK",
      "tags": [
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:postgres",
        "severity:high"
      ],
      "query": "avg(last_5m):avg:postgresql.connections{env:preprod} by {host} > 900"
    },
    {
      "id": 93179532,
      "name": "{{#is_alert}}[PREPROD] \ud83d\udd34 PVC Usage High - {{persistentvolumeclaim.name}} - {{value}}%{{/is_alert}}{{#is_recovery}}[PREPROD] \u2705 PVC Usage Normal - {{persistentvolumeclaim.name}} - {{value}}%{{/is_recovery}}",
      "overall_state": "No Data",
      "tags": [
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:kubernetes",
        "severity:high"
      ],
      "query": "avg(last_10m):avg:kubernetes.persistentvolumeclaim.usage{env:preprod} by {persistentvolumeclaim,kube"
    },
    {
      "id": 93270210,
      "name": "[PREPROD] PostgreSQL WAL Lag > 1 minute - {{host.name}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:wal-lag",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:postgres",
        "severity:critical"
      ],
      "query": "avg(last_5m):avg:postgresql.wal_receiver.last_msg_receipt_age{env:preprod} by {host} > 60"
    },
    {
      "id": 93270214,
      "name": "{{#is_alert}}[PREPROD] :red_circle: PostgreSQL WAL Write Lag High - {{wal_app_name}} - {{value}}s{{/is_alert}}{{#is_warning}}[PREPROD] :warning: PostgreSQL WAL Write Lag Warning - {{wal_app_name}} - {{value}}s{{/is_warning}}{{#is_recovery}}[PREPROD] :white_check_mark: PostgreSQL WAL Write Lag Normal - {{wal_app_name}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:replication-lag",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:postgresql",
        "severity:high"
      ],
      "query": "avg(last_5m):avg:postgresql.replication.wal_write_lag{wal_app_name:postgres-preprod-*} by {wal_app_n"
    },
    {
      "id": 93270231,
      "name": "{{#is_no_data}}[PREPROD] :red_circle: PostgreSQL Database Down - {{database_hostname}} - No uptime data{{/is_no_data}}{{#is_recovery}}[PREPROD] :white_check_mark: PostgreSQL Database Up - {{database_hostname}}{{/is_recovery}}",
      "overall_state": "OK",
      "tags": [
        "alert-type:database-down",
        "cluster:bare-metal-ovh",
        "env:preprod",
        "managed-by:terraform",
        "service:postgresql",
        "severity:critical"
      ],
      "query": "avg(last_5m):avg:postgresql.uptime{database_hostname:postgres-*,env:preprod} by {database_hostname} "
    }
  ]
}